



name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on:
  push:
    branches: 
     - 'master'

jobs:
  buildApp:
    runs-on: ubuntu-latest
    steps:
    - name: Set up Go
        uses: actions/setup-go@v2
        with:
          go-version: '1.20'
    - uses: actions/checkout@master
    - run: go build ./cmd/*
    - name: Deploy to Staging server
      uses: easingthemes/ssh-deploy@main
      with:
        SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}
        ARGS: "-rlgoDzvc -i"
        SOURCE: "cmd/cmd"
        REMOTE_HOST: ${{ secrets.REMOTE_HOST }}
        REMOTE_USER: ${{ secrets.REMOTE_USER }}
        TARGET: ${{ secrets.REMOTE_TARGET }}